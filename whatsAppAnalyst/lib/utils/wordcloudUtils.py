from nltk.corpus import stopwords as stopwordlib 
from nltk.stem import WordNetLemmatizer
from nltk.tokenize import word_tokenize
import re

stopwords = stopwordlib.words('english')
stopwords.extend(['allows', 'yahin', 'kitne', 'toh', 'rakhen', 'tune', 'else', 'often', "shouldn't", 'therefore', 'myself', 'hence', 'dhang', 'has', 'unn', 'take', 'shouldnt', 'third', 'hamari', 'jahaan', 'can', 'abe', 'doosre', 'uska', "there's", 'tell', 'rahaa', 'mostly', 'unhi', 'hereupon', 'lest', 'wala', 'ok', 'han', 'dungi', 'thus', 'seriously', 'hone', 'puri', 'yup', 'banaya', 'have', 'out', 'dekh', 'jinke', 'soon', 'whom', "it's", 'dusre', 'never', 'nine', "haven't", "couldn't", 'she', 'goes', 'become', 'but', "c'mon", 'could', 'did', 'jiski', 'inkaa', 'know', 'on', 'over', 'really', "we've", 'cause', 'teesri', 'anyhow', 'aur', 'mightn', "hadn't", 'mean', 'why', 'chalega', 'logon', 'his', 'ie', 'apna', 'inn', 'rhaa', 'bht', 'aside', 'tujhe', 'when', 'kull', 'going', 'seeming', 'tabh', 'nothing', 'rakho', 'd', 'kinka', 'kiske', 'thereafter', 'u', 'kept', 'yes', 'whoever', 'aaya', "should've", 'thats', 'karne', 'then', 'sath', 'that', "you'll", 'kisne', 'chhaiye', 'followed', 'poori', 'nd', 'afterwards', 'er', 'k', 'tumhara', 'most', 'umm', 'jinho', 'already', 'kise', 'tum', 'tumhe', 'jo', 'unhone', 'somebody', 'likely', 'magar', 'bolta', 'vaala', 'ya', 'yourselves', 'whereupon', 'kahin', 'kr', 'useful', 'humein', 'thinking', 'plus', 'at', 'kal', 'moreover', 'rahi', 'says', 'boli', 'kiya', 'thank', 'issi', 'as', 'iski', 'noone', 'mane', 'jin', 'wahan', 'jaise', 'becomes', 'diya', 'sometimes', 'ever', 'rather', 'secondly', 'jinki', 'still', 'cannot', 'hasn', 'bhitar', 'kaisi', 'thik', 'maana', 'does', 'avum', 'lab', 'hadnt', 'upon', 'inner', 'known', 'yours', 'another', 'kayi', 'thodi', 'kaafi', 'honge', 'isnt', 'kinke', 'bheetar', 'looks', 'want', 'hotaa', 'actually', 'baar', 'tumhari', "weren't", 's', 'hoge', 'phli', 'accordingly', 'rakhi', 'kab', 'quite', 'karna', 'kyunki', "won't", 'saara', 'had', 'not', 'vaale', 'little', 'bandi', 'too', 'whereafter', 'kyu', 'm', "who's", 'kafi', 'all', 'go', 'now', 'karega', 'went', 'lo', 'sahi', "we'll", 'inward', 'wagaira', "what's", 'usually', 'bhai', 'shan', 'besides', 'get', 'lol', 'vaisi', 'vo', 'wasnt', 'mera', 'both', 'following', 'jise', 'outside', 'should', 'wo', 'acha', 'anything', 'waha', 'waisa', 'thanks', 'think', 'to', 'wali', "you're", 'seen', "let's", 'sabse', 'aya', 'although', 'hopefully', 'jaha', 'poora', 'unke', 'bata', 'bola', 'chal', 'gets', 'jahan', 'mere', 'though', 'ltd', 'huye', 'kinn', 'par', 'per', 'waale', 'wagerah', 'off', 'etc', 'do', 'liya', 'these', 'karenge', 'accha', "that'll", 'like', 'hi', 'dont', 'ye', 'each', 'whose', 'di', 'it', 'or', "that's", 'teen', 'sakta', 'best', 'gayi', 'any', 'cant', "we're", 'during', 'meanwhile', 'new', 'seems', 'shant', 'meri', 'people', 'above', 'tjhe', 'of', 'sensible', 'perhaps', 'gaye', 'everything', 'hota', 'isne', 'edu', 'dega', 'kiska', 'normally', 'one', 'naa', 'me', 'ussi', 'kul', 'rha', 'kisi', 'hogi', 'jinhone', 'where', 'abhi', 'theirs', 'jinhi', 'aa', 'diyo', 'batao', 'apne', 'hamare', "where's", 'regardless', 'someone', 'without', 'asking', 'trying', 'mustnt', 'took', 'time', 'insofar', 'bohot', 'haven', 'keh', 'baad', 'our', 'seeing', 'inse', 'yehi', 'arent', 'themselves', 'dvara', 'novel', 'dekhi', 'kitni', 'comes', 'chaiye', "isn't", 'itself', 'hongi', 'weren', 'voh', 'inhi', 'mustn', 'whereas', 'nt', 'look', 'yadi', 'however', 'arre', 'nope', 'kam', 'either', 'que', 'later', 'unlikely', 'appear', 'kahan', 'same', 'right', 'maani', 'saying', "he's", 'krna', 'vahi', 'iske', 'ka', 'mat', 'oh', 'very', 'ought', 'within', 'selves', 'wahaan', 'certain', 'chahiye', 'doesn', 'herein', 'ityadi', 'wants', 'might', 'getting', 'bahut', 'so', 'thereupon', 'vali', 'somewhat', 'anyway', 'kis', 'rhi', 'are', 'sup', 'har', 'konsa', 'merely', "it'll", 'given', 'sub', 'whole', "it'd", 'no', 'downwards', 'may', 'kaisa', 'example', 'ho', "needn't", 'hai', 'jidhar', 'li', 'aap', 'rhe', 'haan', 'non', 'hmm', 'raha', 'nowhere', 'jabh', 'dijiye', 'karun', 'rehte', "they'll", 'against', 'this', 'certainly', 'tumhare', 'tries', 'banaye', 'throughout', 'jyada', 'maan', 'there', 'pr', 'if', 'dwara', 'mil', 'sang', 'looking', 'way', 'abbey', 'inki', 'mani', 'yet', 'hui', 'bole', 'five', 'good', 'huyi', 'dekho', 'beside', 've', 'pata', 'hm', 'nhi', 'sa', 'hain', 'own', 'nahi', 'twice', 'aaye', 'be', 'kinho', 'kyun', "they'd", 'diyaa', 'krne', 'with', 'isse', 'hue', 'ours', 'class', 'truly', 'mjhe', 'thanx', 'six', 'rahe', 'doosra', 'kari', 'saktaa', 'mujhe', 'used', 'willing', 'khud', 'huh', 'being', 'sakti', 'aaj', 'hereafter', 'inka', 'nor', 'lekar', 'greetings', 'werent', 'dude', 'tere', 'will', 'thence', 'iskaa', 'between', 'kaunsa', 'woh', 'i', 'thi', 'lunga', 'kisliye', 'saare', 'teri', 'jitni', 'jinn', 'kiye', 'phla', 'anybody', 'shall', 'ab', 'andar', 'sure', 'hum', 'jinka', "aren't", 'koi', 'follows', 'nobody', 'otherwise', 'aisi', 'banao', 'eight', 'elsewhere', 'fifth', "i'd", 'se', "they've", 'tu', 'aisa', 'howbeit', 'jisse', "i'll", 'rakha', 'aye', 'upar', 'after', 'tab', 'lately', 'teeno', 'tarah', 'unko', 'couldnt', 'many', 'pehla', 'into', 'usi', 'mightnt', 'bolo', 'having', 'hote', 'yahan', 'itna', 'bad', 'whereby', "doesn't", 'they', 'usne', 'maybe', 'true', 'dono', 'wahin', 'yeh', 'idk', 'unho', 'knows', 'theek', 'toward', 'mein', 'okay', 'jayega', "mustn't", 'got', 'ex', 'next', 'unkaa', 'didnt', 'pehli', 'bhi', 'imo', 'agar', 'karunga', 'waise', 'came', 'ki', 'regards', 'those', 'wale', 'maine', 'near', 'keep', 'first', 'kar', 'jisme', 'mano', 'sent', 'phle', 'ask', 'ones', "don't", 'kya', 'others', 'kaise', 'using', 'dede', 'thru', 'seven', 'waali', 'well', 'somewhere', 'yahaan', 'becoming', "i'm", 'something', 'say', 'ri', 'tera', "you'd", 'once', 'humne', 'ourselves', 'jab', 'uss', 'dekha', 'aise', 'jitne', 'we', "here's", 'bol', 'unhe', 'ain', 'reasonably', 'seemed', 'banae', 'thought', 'un', 'ise', 'iska', 'ek', 'aadi', 'b', 'tried', 'how', 'self', 'nai', 'and', 'aren', 'hasnt', 'bande', 'taken', 'liked', 'through', 'wagairah', 'them', 'honi', 'karen', 'also', 'unse', 'isi', 'de', 'least', 'everywhere', 'my', 'vale', 'kon', 'bas', 'vaali', 'won', 'btw', 'only', 'nevertheless', 'gotten', 'none', 'beyond', 'lagta', 'tha', 'need', "wouldn't", 'sometime', 'hua', 'eg', 'aata', 'jis', 'herself', 'karke', 'karu', 'couldn', 'until', 'jinhe', 'hello', 'naah', 'anywhere', 'dusra', 'its', 'karti', 'kehte', "she's", 't', 'always', 'kare', "ain't", 'few', 'isn', 'unka', 'about', 'hardly', 'honaa', 'kahi', 'achcha', 'what', 'from', 'kara', 'just', 'help', 'via', 'because', 'yaha', 'us', 'kahte', 'viz', 'bc', 'the', 'apan', 'dusri', 'tak', 'kinhe', 'rakhe', 'wherever', "we'd", 'far', 'here', 'bolti', 'kinki', 'jaisi', 'along', 'ap', 'pe', 'some', 'was', 'itno', 'gives', 'around', 'brief', 'their', 'wahi', 'wouldn', 'koyi', 'jata', 'again', 'furthermore', 'sara', 'everybody', 'since', 'dekhe', 'more', 'neednt', 'placed', 'second', 'thoda', 'across', 'hu', 'tumne', 'while', 'dwaara', 'several', 'an', 'rakh', 'would', 'himself', 'in', 'banayi', 'itne', 'your', 'behind', 'wohi', 'ja', 'dunga', 'uske', "shan't", 'arey', 'four', 'such', 'doing', 'um', 'amongst', 'overall', 'further', 'apni', 'use', 'banai', 'karte', 'vahan', 'jitna', 'neeche', 'thoroughly', 'jyaada', 'thing', 'hoti', 'theres', 'kuch', 'ne', 'ko', 'below', 'except', 'kinko', 'lekin', 'hers', 'kahaa', 'therein', 'maano', 'hadd', 'come', 'obviously', 'yourself', 'e', 'wouldnt', 'wherein', 'tho', 'waisi', 'happens', 'teesra', 'didn', 'unki', 'aint', 'hamne', 'kch', "i've", 'kiski', 'vaisa', 'kitno', 'na', 'together', 'even', 'yeah', 'mana', 'before', 'seem', 'ityaadi', 'for', 'whenever', 'wont', 'he', 'according', 'vaise', 'sab', 'sabhi', 'nearly', 'q', 'gaya', 'hither', 'n', 'less', 'inke', 'hamara', 'name', "you've", 'wasn', 'provides', 'pehle', 'kino', 'causes', 'com', 'exactly', 'kin', "hasn't", 'vahin', 'whether', 'inc', 'kuchch', 'became', 'degi', 'hona', 'si', 'alag', 'karegi', 'inhe', 'two', 'y', 'maane', 'must', 'kaun', 'him', 'hun', 'kahaan', 'aati', 'karni', "mightn't", 'shouldn', 'apart', 'ke', 'itni', 'able', 'hoyengi', 'her', 'saw', 'havent', 'kabhi', 'various', 'every', 'whatever', 'were', 'isme', 'dvaara', 'mainly', "wasn't", 'isski', 'jiska', 'waala', 'done', 'am', 'by', 'usse', 'uses', 'somehow', 'yahi', 'is', 'karo', "didn't", 'whence', 'old', 'mai', 'vala', 'hoga', 'inasmuch', 'enough', 'iss', 'ra', 'rah', 're', 'try', 'everyone', 'hoyenge', 'bane', 'main', 'let', 'hadn', 'towards', 'apnaa', 'anyways', 'yah', 'see', 'under', 'needn', 'neither', 'better', 'o', 'kisko', 'thorough', 'than', 'keeps', 'log', 'lagti', 'kitna', 'denge', 'last', 'teesre', 'up', 'diye', 'le', 'kaha', 'll', 'vahaan', 'down', 'hereby', 'regarding', 'kuchh', 'been', 'liye', 'kine', 'you', 'who', 'sir', 'sakte', 'thereby', "can't", 'kyuki', 'saath', 'among', 'bana', 'jaa', 'three', 'much', 'clearly', 'serious', 'bani', 'gone', "they're", 'bilkul', 'aapne', 'needs', 'onto', 'beforehand', 'pura', 'ghar', 'almost', 'doesnt', 'said', 'kyaa', 'please', 'allow', 'necessary', 'bro', 'other', 'bolte', 'a', 'fir', 'karta', 'th', 'jiske', 'nahin', 'alone', 'forth', 'unless', 'karungi', 'soch', 'abbe', 'lagte', 'which', 'jaisa', 'unto', 'tends', 'jiss', 'inho', 'banda', 'namely', 'anyone'])

le = WordNetLemmatizer()

def preprocess(text):   
    
    tokens=word_tokenize(text.lower())
    
    punctuation=re.compile('[^a-zA-Z]*')    
    post_punctutation=([punctuation.sub("", word) for word in tokens])
    
    stem_token=[le.lemmatize(word) for word in post_punctutation]    
    stem_token=[token for token in stem_token if token not in stopwords]
    return " ".join(stem_token)